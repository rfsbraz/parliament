"""Update IntervencaoParlamentar model to match actual XML structure

Revision ID: f0e55065e695
Revises: f624c4f1871d
Create Date: 2025-08-10 09:02:10.670467

"""
from typing import Sequence, Union

from alembic import op
import sqlalchemy as sa
from sqlalchemy.dialects import mysql

# revision identifiers, used by Alembic.
revision: str = 'f0e55065e695'
down_revision: Union[str, Sequence[str], None] = 'f624c4f1871d'
branch_labels: Union[str, Sequence[str], None] = None
depends_on: Union[str, Sequence[str], None] = None


def upgrade() -> None:
    """Upgrade schema."""
    # ### commands auto generated by Alembic - please adjust! ###
    op.alter_column('intervencao_parlamentar', 'tipo_intervencao',
               existing_type=mysql.VARCHAR(collation='utf8mb4_unicode_ci', length=200),
               comment='Intervention type description (TipoIntervencao from XML)',
               existing_comment='Intervention type (tinDs) - human readable description',
               existing_nullable=True)
    op.alter_column('intervencao_parlamentar', 'data_reuniao_plenaria',
               existing_type=sa.DATE(),
               comment='Plenary meeting date (DataReuniaoPlenaria)',
               existing_comment='Plenary meeting date (pubDtreu)',
               existing_nullable=True)
    op.alter_column('intervencao_parlamentar', 'qualidade',
               existing_type=mysql.VARCHAR(collation='utf8mb4_unicode_ci', length=100),
               comment='Intervention quality/context (Qualidade)',
               existing_comment='Intervention quality/context',
               existing_nullable=True)
    op.alter_column('intervencao_parlamentar', 'fase_sessao',
               existing_type=mysql.VARCHAR(collation='utf8mb4_unicode_ci', length=100),
               comment='Session phase when intervention occurred (FaseSessao)',
               existing_comment='Session phase when intervention occurred',
               existing_nullable=True)
    op.alter_column('intervencao_parlamentar', 'sumario',
               existing_type=mysql.TEXT(collation='utf8mb4_unicode_ci'),
               comment='Intervention summary (Sumario)',
               existing_comment='Intervention summary (intSu)',
               existing_nullable=True)
    op.alter_column('intervencao_parlamentar', 'resumo',
               existing_type=mysql.TEXT(collation='utf8mb4_unicode_ci'),
               comment='Intervention abstract/resume (Resumo)',
               existing_comment='Intervention abstract/resume (intTe)',
               existing_nullable=True)
    op.alter_column('intervencao_parlamentar', 'atividade_id',
               existing_type=mysql.INTEGER(),
               comment='Related activity identifier (ActividadeId)',
               existing_comment='Related activity identifier',
               existing_nullable=True)
    op.alter_column('intervencao_parlamentar', 'id_debate',
               existing_type=mysql.INTEGER(),
               comment='Related debate identifier (IdDebate)',
               existing_comment='Related debate identifier',
               existing_nullable=True)
    op.alter_column('orcamento_estado_artigos', 'numero',
               existing_type=mysql.VARCHAR(collation='utf8mb4_unicode_ci', length=50),
               type_=sa.String(length=200),
               existing_nullable=True)
    op.alter_column('orcamento_estado_artigos', 'tipo',
               existing_type=mysql.VARCHAR(collation='utf8mb4_unicode_ci', length=50),
               type_=sa.String(length=100),
               existing_nullable=True)
    op.alter_column('orcamento_estado_artigos', 'titulo',
               existing_type=mysql.TEXT(collation='utf8mb4_unicode_ci'),
               type_=sa.Text().with_variant(mysql.LONGTEXT(), 'mysql'),
               existing_nullable=True)
    op.alter_column('orcamento_estado_artigos', 'texto',
               existing_type=mysql.TEXT(collation='utf8mb4_unicode_ci'),
               type_=sa.Text().with_variant(mysql.LONGTEXT(), 'mysql'),
               existing_nullable=True)
    # ### end Alembic commands ###


def downgrade() -> None:
    """Downgrade schema."""
    # ### commands auto generated by Alembic - please adjust! ###
    op.alter_column('orcamento_estado_artigos', 'texto',
               existing_type=sa.Text().with_variant(mysql.LONGTEXT(), 'mysql'),
               type_=mysql.TEXT(collation='utf8mb4_unicode_ci'),
               existing_nullable=True)
    op.alter_column('orcamento_estado_artigos', 'titulo',
               existing_type=sa.Text().with_variant(mysql.LONGTEXT(), 'mysql'),
               type_=mysql.TEXT(collation='utf8mb4_unicode_ci'),
               existing_nullable=True)
    op.alter_column('orcamento_estado_artigos', 'tipo',
               existing_type=sa.String(length=100),
               type_=mysql.VARCHAR(collation='utf8mb4_unicode_ci', length=50),
               existing_nullable=True)
    op.alter_column('orcamento_estado_artigos', 'numero',
               existing_type=sa.String(length=200),
               type_=mysql.VARCHAR(collation='utf8mb4_unicode_ci', length=50),
               existing_nullable=True)
    op.alter_column('intervencao_parlamentar', 'id_debate',
               existing_type=mysql.INTEGER(),
               comment='Related debate identifier',
               existing_comment='Related debate identifier (IdDebate)',
               existing_nullable=True)
    op.alter_column('intervencao_parlamentar', 'atividade_id',
               existing_type=mysql.INTEGER(),
               comment='Related activity identifier',
               existing_comment='Related activity identifier (ActividadeId)',
               existing_nullable=True)
    op.alter_column('intervencao_parlamentar', 'resumo',
               existing_type=mysql.TEXT(collation='utf8mb4_unicode_ci'),
               comment='Intervention abstract/resume (intTe)',
               existing_comment='Intervention abstract/resume (Resumo)',
               existing_nullable=True)
    op.alter_column('intervencao_parlamentar', 'sumario',
               existing_type=mysql.TEXT(collation='utf8mb4_unicode_ci'),
               comment='Intervention summary (intSu)',
               existing_comment='Intervention summary (Sumario)',
               existing_nullable=True)
    op.alter_column('intervencao_parlamentar', 'fase_sessao',
               existing_type=mysql.VARCHAR(collation='utf8mb4_unicode_ci', length=100),
               comment='Session phase when intervention occurred',
               existing_comment='Session phase when intervention occurred (FaseSessao)',
               existing_nullable=True)
    op.alter_column('intervencao_parlamentar', 'qualidade',
               existing_type=mysql.VARCHAR(collation='utf8mb4_unicode_ci', length=100),
               comment='Intervention quality/context',
               existing_comment='Intervention quality/context (Qualidade)',
               existing_nullable=True)
    op.alter_column('intervencao_parlamentar', 'data_reuniao_plenaria',
               existing_type=sa.DATE(),
               comment='Plenary meeting date (pubDtreu)',
               existing_comment='Plenary meeting date (DataReuniaoPlenaria)',
               existing_nullable=True)
    op.alter_column('intervencao_parlamentar', 'tipo_intervencao',
               existing_type=mysql.VARCHAR(collation='utf8mb4_unicode_ci', length=200),
               comment='Intervention type (tinDs) - human readable description',
               existing_comment='Intervention type description (TipoIntervencao from XML)',
               existing_nullable=True)
    # ### end Alembic commands ###
